# æ¿å—3ï¼šæŸ±çŠ¶å›¾æ•°æ®é‡æ„ - è¡¥å……è¯´æ˜

## ğŸ“ æ­£ç¡®çš„å¸ƒå±€ç†è§£

### è§†è§‰å¸ƒå±€ï¼ˆæ¯ä¸ªæ¨¡å—ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨¡å—1ï¼šæ±½è½¦å¹´ç”Ÿäº§é‡                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   å·¦ä¾§ï¼šæŸ±çŠ¶å›¾    â”‚   å³ä¾§ï¼šæ–‡å­—ä»‹ç»          â”‚    â”‚
â”‚  â”‚                  â”‚                          â”‚    â”‚
â”‚  â”‚   [2023] 100ä¸‡   â”‚  ğŸ“Š æ±½è½¦äº§é‡å¿«é€Ÿå¢é•¿      â”‚    â”‚
â”‚  â”‚   [2024] 130ä¸‡   â”‚                          â”‚    â”‚
â”‚  â”‚   [2025] 150ä¸‡   â”‚  æ·±æ±•åˆä½œåŒºä¾æ‰˜æ¯”äºšè¿ªç­‰   â”‚    â”‚
â”‚  â”‚                  â”‚  é¾™å¤´ä¼ä¸šï¼Œæ±½è½¦äº§é‡å®ç°   â”‚    â”‚
â”‚  â”‚   (æŸ±çŠ¶å›¾å¯è§†åŒ–)  â”‚  çˆ†å‘å¼å¢é•¿ã€‚2023å¹´è¾¾    â”‚    â”‚
â”‚  â”‚                  â”‚  100ä¸‡è¾†ï¼Œ2024å¹´çªç ´...  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨¡å—2ï¼šé«˜ç§‘æŠ€ä¼ä¸šæ•°é‡                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   å·¦ä¾§ï¼šæŸ±çŠ¶å›¾    â”‚   å³ä¾§ï¼šæ–‡å­—ä»‹ç»          â”‚    â”‚
â”‚  â”‚                  â”‚                          â”‚    â”‚
â”‚  â”‚   [2023] 120å®¶   â”‚  ğŸ¢ ä¼ä¸šé›†ç¾¤æ•ˆåº”æ˜¾ç°      â”‚    â”‚
â”‚  â”‚   [2024] 180å®¶   â”‚                          â”‚    â”‚
â”‚  â”‚   [2025] 250å®¶   â”‚  å›´ç»•æ–°èƒ½æºæ±½è½¦äº§ä¸šé“¾ï¼Œ   â”‚    â”‚
â”‚  â”‚                  â”‚  æ·±æ±•åˆä½œåŒºå¸å¼•äº†é€Ÿè…¾...  â”‚    â”‚
â”‚  â”‚   (æŸ±çŠ¶å›¾å¯è§†åŒ–)  â”‚                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨¡å—3ï¼šæ±½è½¦å‡ºå£é‡                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   å·¦ä¾§ï¼šæŸ±çŠ¶å›¾    â”‚   å³ä¾§ï¼šæ–‡å­—ä»‹ç»          â”‚    â”‚
â”‚  â”‚                  â”‚                          â”‚    â”‚
â”‚  â”‚   [2023] 30ä¸‡    â”‚  ğŸŒ å‡ºå‚å³å‡ºæµ·           â”‚    â”‚
â”‚  â”‚   [2024] 65ä¸‡    â”‚                          â”‚    â”‚
â”‚  â”‚   [2025] 90ä¸‡    â”‚  ä¾æ‰˜å°æ¼ å›½é™…ç‰©æµæ¸¯ï¼Œæ·±   â”‚    â”‚
â”‚  â”‚                  â”‚  æ±•å®ç°"å‡ºå‚å³å‡ºæµ·"ã€‚å¼€  â”‚    â”‚
â”‚  â”‚   (æŸ±çŠ¶å›¾å¯è§†åŒ–)  â”‚  é€š11æ¡å›½é™…èˆªçº¿...       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®è®¾è®¡è¦ç‚¹

1. **ä¸‰ä¸ªæ¨¡å—çºµå‘æ’åˆ—**ï¼Œæ¯ä¸ªæ¨¡å—å å±å¹•é«˜åº¦çš„çº¦ 1/3
2. **æ¯ä¸ªæ¨¡å—å†…éƒ¨æ˜¯å·¦å³å¸ƒå±€**ï¼š
   - å·¦åŠè¾¹ï¼šæŸ±çŠ¶å›¾ï¼ˆæ˜¾ç¤º3ä¸ªå¹´ä»½çš„æŸ±å­ï¼‰
   - å³åŠè¾¹ï¼šç´§è´´çš„æ–‡å­—ä»‹ç»ï¼ˆä¸æ˜¯ç‹¬ç«‹åŒºåŸŸï¼Œè€Œæ˜¯å’ŒæŸ±çŠ¶å›¾é…åˆï¼‰
3. **æ–‡å­—ä»‹ç»çš„ä½œç”¨**ï¼š
   - è¡¥å……è¯´æ˜æŸ±çŠ¶å›¾çš„æ•°æ®èƒŒæ™¯
   - æä¾›è¶‹åŠ¿åˆ†æ
   - å¢å¼ºæ•°æ®çš„å¯è¯»æ€§
4. **æ‰‹æœºç«¯ä¸€å±å±•ç¤º**ï¼šä¸‰ä¸ªæ¨¡å—åŠ èµ·æ¥åˆšå¥½å æ»¡ä¸€ä¸ªæ‰‹æœºå±å¹•

---

## ğŸ’» å®Œæ•´ä»£ç å®ç°

### æ•°æ®ç»“æ„å®šä¹‰

```typescript
// src/types/index.ts æ–°å¢
export interface ChartDataItem {
  year: string
  value: number
  color: string
  detail: string // ç‚¹å‡»åæ˜¾ç¤ºçš„è¯¦ç»†è¯´æ˜
}

export interface ChartModule {
  id: string
  title: string
  unit: string
  icon: string // emoji å›¾æ ‡
  description: string // å³ä¾§æ–‡å­—ä»‹ç»
  highlights: string[] // å…³é”®äº®ç‚¹ï¼ˆå¯é€‰ï¼‰
  data: ChartDataItem[]
}
```

### Vue ç»„ä»¶å®Œæ•´ä»£ç 

```vue
<template>
  <div class="section section-3" ref="sectionRef">
    <!-- èƒŒæ™¯å›¾ -->
    <div class="bg-image"></div>

    <div class="content">
      <h2 class="section-title typewriter">æ·±æ±•æ™ºé€ ï¼Œé€šè¾¾å…¨çƒ</h2>

      <!-- ä¸‰ä¸ªæŸ±çŠ¶å›¾æ¨¡å—ï¼ˆçºµå‘æ’åˆ—ï¼‰ -->
      <div class="chart-modules">
        <div
          v-for="(module, moduleIndex) in chartModules"
          :key="module.id"
          class="chart-module"
          :class="{ visible: visibleModules >= moduleIndex }"
        >
          <!-- æ¨¡å—æ ‡é¢˜ï¼ˆå¯é€‰ï¼Œä¹Ÿå¯ä»¥å»æ‰ï¼‰ -->
          <div class="module-header">
            <span class="module-icon">{{ module.icon }}</span>
            <h3 class="module-title">{{ module.title }}</h3>
          </div>

          <!-- å·¦å³å¸ƒå±€å®¹å™¨ -->
          <div class="module-content">
            <!-- å·¦ä¾§ï¼šæŸ±çŠ¶å›¾ -->
            <div class="chart-side">
              <div class="chart-wrapper">
                <div class="chart-bars">
                  <div
                    v-for="(item, barIndex) in module.data"
                    :key="item.year"
                    class="bar-item"
                    :class="{ 'bar-visible': visibleBars[moduleIndex] >= barIndex }"
                    @click="showBarDetail(item, module)"
                  >
                    <!-- æŸ±å­ -->
                    <div class="bar-wrapper">
                      <div
                        class="bar"
                        :style="{
                          height: (item.value / getMaxValue(module.data) * 100) + '%',
                          background: item.color
                        }"
                      >
                        <span class="bar-value">{{ formatValue(item.value, module.unit) }}</span>
                      </div>
                    </div>

                    <!-- å¹´ä»½æ ‡ç­¾ -->
                    <div class="bar-label">{{ item.year }}</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- å³ä¾§ï¼šæ–‡å­—ä»‹ç» -->
            <div class="text-side">
              <div class="text-content">
                <!-- ä¸»è¦æè¿° -->
                <p class="description typewriter" :data-text="module.description">
                  {{ displayTexts[moduleIndex] || '' }}
                </p>

                <!-- å…³é”®äº®ç‚¹ï¼ˆå¯é€‰ï¼‰ -->
                <div v-if="module.highlights" class="highlights">
                  <div
                    v-for="(highlight, hIndex) in module.highlights"
                    :key="hIndex"
                    class="highlight-item"
                  >
                    <span class="highlight-dot">â€¢</span>
                    <span class="highlight-text">{{ highlight }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ç‚¹å‡»æŸ±å­å¼¹å‡ºçš„å¼¹çª— -->
    <transition name="fade">
      <div v-if="activeBar" class="bar-tooltip" @click="activeBar = null">
        <div class="tooltip-content" @click.stop>
          <button class="close-btn" @click="activeBar = null">Ã—</button>
          <div class="tooltip-header">
            <span class="tooltip-icon">{{ activeBar.icon }}</span>
            <h4>{{ activeBar.title }}</h4>
          </div>
          <p class="tooltip-year">{{ activeBar.year }}</p>
          <p class="tooltip-value">{{ activeBar.value }}{{ activeBar.unit }}</p>
          <p class="tooltip-detail">{{ activeBar.detail }}</p>
        </div>
      </div>
    </transition>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue'
import { useIntersection } from '@/composables/useIntersection'
import { useAnimation } from '@/composables/useAnimation'
import { useTypewriter } from '@/composables/useTypewriter'
import type { ChartModule, ChartDataItem } from '@/types'

const sectionRef = ref<HTMLElement | null>(null)
const visibleModules = ref(-1)
const visibleBars = ref<number[]>([0, 0, 0])
const activeBar = ref<any>(null)
const displayTexts = ref<string[]>(['', '', ''])

const { createTimeline } = useAnimation()
const { typeText } = useTypewriter()

// ä¸‰ä¸ªæŸ±çŠ¶å›¾æ¨¡å—æ•°æ®
const chartModules: ChartModule[] = [
  {
    id: 'car-production',
    title: 'æ±½è½¦å¹´ç”Ÿäº§é‡',
    unit: 'ä¸‡è¾†',
    icon: 'ğŸš—',
    description: 'æ·±æ±•åˆä½œåŒºä¾æ‰˜æ¯”äºšè¿ªç­‰é¾™å¤´ä¼ä¸šï¼Œæ±½è½¦äº§é‡å®ç°çˆ†å‘å¼å¢é•¿ã€‚2023å¹´è¾¾100ä¸‡è¾†ï¼Œ2024å¹´çªç ´130ä¸‡è¾†ï¼Œ2025å¹´é¢„è®¡è¾¾150ä¸‡è¾†ï¼Œæˆä¸ºå…¨çƒæ–°èƒ½æºæ±½è½¦åˆ¶é€ é‡é•‡ã€‚',
    highlights: [
      '2024å¹´äº§é‡åŒæ¯”å¢é•¿30%',
      'å…¨çƒé¦–å®¶1300ä¸‡è¾†ä¸‹çº¿å·¥å‚',
      'æ±½è½¦åˆ¶é€ ä¸šå¢åŠ å€¼å¢é•¿621.1%'
    ],
    data: [
      {
        year: '2023',
        value: 100,
        color: 'linear-gradient(to top, #3b82f6, #60a5fa)',
        detail: '2023å¹´æ˜¯æ·±æ±•æ±½è½¦äº§ä¸šçš„èµ·é£ä¹‹å¹´ï¼Œæ¯”äºšè¿ªæ·±åœ³å·å·¥å‚å…¨é¢æŠ•äº§ï¼Œå®ç°å¹´äº§100ä¸‡è¾†çš„é‡Œç¨‹ç¢‘ï¼Œæ ‡å¿—ç€æ·±æ±•åˆä½œåŒºæ­£å¼è¿ˆå…¥æ±½è½¦åˆ¶é€ é‡é•‡è¡Œåˆ—ã€‚'
      },
      {
        year: '2024',
        value: 130,
        color: 'linear-gradient(to top, #10b981, #34d399)',
        detail: '2024å¹´äº§é‡åŒæ¯”å¢é•¿30%ï¼Œè¾¾åˆ°130ä¸‡è¾†ã€‚æ¯”äºšè¿ªäºŒæœŸé¡¹ç›®æŠ•äº§ï¼Œæ±½è½¦åˆ¶é€ ä¸šå¢åŠ å€¼å¢é•¿621.1%ï¼Œæ·±æ±•æˆä¸ºåå—åœ°åŒºæœ€é‡è¦çš„æ–°èƒ½æºæ±½è½¦ç”Ÿäº§åŸºåœ°ä¹‹ä¸€ã€‚'
      },
      {
        year: '2025',
        value: 150,
        color: 'linear-gradient(to top, #f59e0b, #fbbf24)',
        detail: '2025å¹´é¢„è®¡äº§é‡è¾¾150ä¸‡è¾†ï¼Œå…¨çƒé¦–å®¶è¾¾æˆç¬¬1300ä¸‡è¾†æ–°èƒ½æºæ±½è½¦ä¸‹çº¿é‡Œç¨‹ç¢‘çš„å·¥å‚è¯ç”Ÿäºæ­¤ï¼Œæ·±æ±•æ±½è½¦äº§ä¸šè¿›å…¥ä¸–ç•Œçº§åˆ¶é€ é›†ç¾¤ã€‚'
      }
    ]
  },
  {
    id: 'tech-companies',
    title: 'é«˜ç§‘æŠ€ä¼ä¸šæ•°é‡',
    unit: 'å®¶',
    icon: 'ğŸ¢',
    description: 'å›´ç»•æ–°èƒ½æºæ±½è½¦äº§ä¸šé“¾ï¼Œæ·±æ±•åˆä½œåŒºå¸å¼•äº†é€Ÿè…¾èšåˆ›ã€å£è™ç§‘æŠ€ç­‰è¿‘30å®¶åˆ›æ–°å‹ä¼ä¸šå…¥é©»ï¼Œå½¢æˆå®Œæ•´çš„äº§ä¸šç”Ÿæ€é“¾ï¼Œä¼ä¸šæ•°é‡å¹´å‡å¢é•¿40%ä»¥ä¸Šã€‚',
    highlights: [
      'æ¶µç›–æ•´è½¦åˆ¶é€ åˆ°é›¶éƒ¨ä»¶å…¨äº§ä¸šé“¾',
      'é€Ÿè…¾èšåˆ›ã€å£è™ç§‘æŠ€ç­‰é¾™å¤´ä¼ä¸š',
      'å¹´å‡å¢é•¿ç‡è¶…è¿‡40%'
    ],
    data: [
      {
        year: '2023',
        value: 120,
        color: 'linear-gradient(to top, #8b5cf6, #a78bfa)',
        detail: '2023å¹´å·²æœ‰120å®¶è§„æ¨¡ä»¥ä¸Šå·¥ä¸šä¼ä¸šè½æˆ·ï¼Œæ¶µç›–æ•´è½¦åˆ¶é€ ã€é›¶éƒ¨ä»¶ã€æ™ºèƒ½é©¾é©¶ç­‰é¢†åŸŸï¼Œåˆæ­¥å½¢æˆäº§ä¸šé›†èšæ•ˆåº”ã€‚'
      },
      {
        year: '2024',
        value: 180,
        color: 'linear-gradient(to top, #ec4899, #f472b6)',
        detail: '2024å¹´ä¼ä¸šæ•°é‡çªç ´180å®¶ï¼ŒåŒæ¯”å¢é•¿50%ã€‚äº§ä¸šé›†ç¾¤æ•ˆåº”æ˜¾ç°ï¼Œé…å¥—äº§ä¸šé“¾æ—¥è¶‹å®Œå–„ï¼Œå¸å¼•åŠ›æŒç»­å¢å¼ºã€‚'
      },
      {
        year: '2025',
        value: 250,
        color: 'linear-gradient(to top, #f59e0b, #fbbf24)',
        detail: '2025å¹´é¢„è®¡è¾¾250å®¶ï¼Œæ·±æ±•æˆä¸ºç²¤æ¸¯æ¾³å¤§æ¹¾åŒºæ–°èƒ½æºæ±½è½¦äº§ä¸šçš„æ ¸å¿ƒæ‰¿è½½åœ°ä¹‹ä¸€ï¼Œäº§ä¸šç”Ÿæ€æ›´åŠ å®Œå–„ã€‚'
      }
    ]
  },
  {
    id: 'car-exports',
    title: 'æ±½è½¦å‡ºå£é‡',
    unit: 'ä¸‡è¾†',
    icon: 'ğŸŒ',
    description: 'ä¾æ‰˜å°æ¼ å›½é™…ç‰©æµæ¸¯ï¼Œæ·±æ±•å®ç°"å‡ºå‚å³å‡ºæµ·"ã€‚å¼€é€š11æ¡å›½é™…èˆªçº¿ï¼Œäº§å“è¿œé”€æ¬§æ´²ã€å—ç¾ã€ä¸œå—äºšã€éæ´²ç­‰70å¤šä¸ªå›½å®¶å’Œåœ°åŒºï¼Œå‡ºå£é‡å¹´å‡å¢é•¿è¶…è¿‡100%ã€‚',
    highlights: [
      '5åˆ†é’Ÿæé€Ÿé›†æ¸¯æ•ˆç‡å…¨çƒé¢†å…ˆ',
      '11æ¡å›½é™…èˆªçº¿é€šè¾¾å…¨çƒ',
      'æ¾³å¤§åˆ©äºšæœ€å¿«10å¤©æŠµè¾¾'
    ],
    data: [
      {
        year: '2023',
        value: 30,
        color: 'linear-gradient(to top, #06b6d4, #22d3ee)',
        detail: '2023å¹´å‡ºå£é‡è¾¾30ä¸‡è¾†ï¼Œä¸»è¦å‡ºå£è‡³ä¸œå—äºšå’Œéæ´²å¸‚åœºï¼Œå‡ºå£å¢é€Ÿå…¨å›½é¢†å…ˆï¼Œ"å‡ºå‚å³å‡ºæµ·"æ¨¡å¼åˆæ­¥å½¢æˆã€‚'
      },
      {
        year: '2024',
        value: 65,
        color: 'linear-gradient(to top, #10b981, #34d399)',
        detail: '2024å¹´å‡ºå£é‡ç¿»å€å¢é•¿è‡³65ä¸‡è¾†ï¼Œæ¬§æ´²å’Œå—ç¾å¸‚åœºå®ç°çªç ´ï¼Œ5åˆ†é’Ÿæé€Ÿé›†æ¸¯æ•ˆç‡å…¨çƒé¢†å…ˆï¼Œå›½é™…å½±å“åŠ›æ˜¾è‘—æå‡ã€‚'
      },
      {
        year: '2025',
        value: 90,
        color: 'linear-gradient(to top, #f59e0b, #fbbf24)',
        detail: '2025å¹´å‡ºå£é‡é¢„è®¡è¾¾90ä¸‡è¾†ï¼Œäº§å“å‡ºå£è‡³æ¾³å¤§åˆ©äºšæœ€å¿«ä»…éœ€10å¤©æŠµè¾¾ï¼Œæ·±æ±•æˆä¸ºä¸­å›½æ–°èƒ½æºæ±½è½¦å‡ºå£çš„é‡è¦é—¨æˆ·ã€‚'
      }
    ]
  }
]

// è®¡ç®—æ¯ä¸ªæ¨¡å—çš„æœ€å¤§å€¼
const getMaxValue = (data: ChartDataItem[]) => {
  return Math.max(...data.map(item => item.value))
}

// æ ¼å¼åŒ–æ•°å€¼æ˜¾ç¤º
const formatValue = (value: number, unit: string) => {
  if (value >= 10000) {
    return (value / 10000).toFixed(1) + 'ä¸‡'
  }
  return value + unit
}

// æ˜¾ç¤ºæŸ±å­è¯¦æƒ…
const showBarDetail = (bar: ChartDataItem, module: ChartModule) => {
  activeBar.value = {
    ...bar,
    unit: module.unit,
    icon: module.icon,
    title: module.title
  }
}

// ç›‘å¬å¯è§æ€§ï¼Œé€æ¨¡å—æ˜¾ç¤º
useIntersection(sectionRef, () => {
  const tl = createTimeline()

  // é€ä¸ªæ¨¡å—æ˜¾ç¤º
  chartModules.forEach((module, moduleIndex) => {
    tl.add(() => {
      visibleModules.value = moduleIndex

      // è¯¥æ¨¡å—çš„æŸ±å­é€æ¡æ˜¾ç¤º
      setTimeout(() => {
        animateBars(moduleIndex)
      }, 300)

      // æ‰“å­—æœºæ•ˆæœæ˜¾ç¤ºæ–‡å­—
      setTimeout(() => {
        typeText(
          module.description,
          (displayText) => {
            displayTexts.value[moduleIndex] = displayText
          },
          {
            speed: 30,
            delay: 0
          }
        )
      }, 800)
    }, `+=${moduleIndex === 0 ? 0.5 : 1.5}`)
  })
})

// æŸ±å­é€æ¡åŠ¨ç”»
const animateBars = (moduleIndex: number) => {
  chartModules[moduleIndex].data.forEach((_, barIndex) => {
    setTimeout(() => {
      visibleBars.value[moduleIndex] = barIndex
    }, barIndex * 400) // æ¯æ¡æŸ±å­é—´éš”400ms
  })
}
</script>

<style scoped lang="scss">
.section-3 {
  position: relative;
  width: 100%;
  min-height: 100vh;
  color: white;
  padding: 60px 20px;
  display: flex;
  align-items: center;
  justify-content: center;

  .bg-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('/images/section3/bg-industry.jpg');
    background-size: cover;
    background-position: center;
    z-index: 0;

    &::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
    }
  }

  .content {
    position: relative;
    z-index: 1;
    max-width: 1200px;
    width: 100%;
  }

  .section-title {
    font-size: clamp(28px, 5vw, 42px);
    font-weight: bold;
    text-align: center;
    color: white;
    margin-bottom: 40px;
    text-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
  }

  // æŸ±çŠ¶å›¾æ¨¡å—å®¹å™¨ï¼ˆçºµå‘æ’åˆ—ï¼‰
  .chart-modules {
    display: flex;
    flex-direction: column;
    gap: 20px;

    @media (max-width: 768px) {
      gap: 15px;
    }

    // å•ä¸ªæ¨¡å—ï¼ˆæ‰‹æœºç«¯å å±å¹•é«˜åº¦çš„1/3ï¼‰
    .chart-module {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.8s ease;

      &.visible {
        opacity: 1;
        transform: translateY(0);
      }

      @media (max-width: 768px) {
        padding: 15px;
        min-height: calc((100vh - 180px) / 3); // å‡å»é¡¶æ å’Œåº•æ åï¼Œæ¯ä¸ªæ¨¡å—å 1/3
        display: flex;
        flex-direction: column;
      }

      // æ¨¡å—å¤´éƒ¨ï¼ˆå¯é€‰ï¼‰
      .module-header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;

        .module-icon {
          font-size: 28px;
        }

        .module-title {
          font-size: clamp(18px, 3vw, 22px);
          font-weight: bold;
          color: rgb(22, 93, 255);
          margin: 0;
        }
      }

      // å·¦å³å¸ƒå±€å®¹å™¨
      .module-content {
        display: grid;
        grid-template-columns: 45% 55%; // å·¦ä¾§æŸ±çŠ¶å›¾45%ï¼Œå³ä¾§æ–‡å­—55%
        gap: 20px;
        align-items: center;

        @media (max-width: 768px) {
          grid-template-columns: 40% 60%; // æ‰‹æœºç«¯æŸ±çŠ¶å›¾ç¨çª„
          gap: 12px;
          flex: 1;
        }

        // å·¦ä¾§ï¼šæŸ±çŠ¶å›¾
        .chart-side {
          display: flex;
          align-items: center;
          justify-content: center;

          .chart-wrapper {
            width: 100%;

            .chart-bars {
              display: flex;
              justify-content: space-around;
              align-items: flex-end;
              height: 180px;
              gap: 10px;
              padding: 0 10px;
              border-bottom: 3px solid #e5e7eb;
              position: relative;

              @media (max-width: 768px) {
                height: 140px;
                gap: 6px;
                padding: 0 5px;
              }

              .bar-item {
                flex: 1;
                display: flex;
                flex-direction: column;
                align-items: center;
                cursor: pointer;
                opacity: 0;
                transform: scaleY(0);
                transform-origin: bottom;
                transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);

                &.bar-visible {
                  opacity: 1;
                  transform: scaleY(1);
                }

                &:hover {
                  transform: scaleY(1.05) translateY(-5px);

                  .bar {
                    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
                  }
                }

                .bar-wrapper {
                  flex: 1;
                  width: 100%;
                  display: flex;
                  align-items: flex-end;
                  justify-content: center;

                  .bar {
                    width: 100%;
                    max-width: 50px;
                    min-height: 30px;
                    border-radius: 8px 8px 0 0;
                    display: flex;
                    align-items: flex-start;
                    justify-content: center;
                    padding-top: 8px;
                    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
                    position: relative;
                    transition: all 0.3s ease;

                    @media (max-width: 768px) {
                      max-width: 35px;
                      padding-top: 6px;
                    }

                    // é¡¶éƒ¨é«˜å…‰
                    &::before {
                      content: '';
                      position: absolute;
                      top: 0;
                      left: 0;
                      right: 0;
                      height: 4px;
                      background: rgba(255, 255, 255, 0.6);
                      border-radius: 8px 8px 0 0;
                    }

                    .bar-value {
                      font-size: clamp(10px, 2vw, 13px);
                      font-weight: bold;
                      color: white;
                      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
                      line-height: 1.2;
                      text-align: center;
                    }
                  }
                }

                .bar-label {
                  margin-top: 8px;
                  font-size: clamp(11px, 2vw, 13px);
                  font-weight: 600;
                  color: #1f2937;

                  @media (max-width: 768px) {
                    margin-top: 6px;
                    font-size: 10px;
                  }
                }
              }
            }
          }
        }

        // å³ä¾§ï¼šæ–‡å­—ä»‹ç»
        .text-side {
          display: flex;
          align-items: center;
          padding: 15px;
          background: rgba(22, 93, 255, 0.05);
          border-radius: 12px;
          border-left: 4px solid rgb(22, 93, 255);
          height: 100%;

          @media (max-width: 768px) {
            padding: 10px;
          }

          .text-content {
            width: 100%;

            .description {
              font-size: clamp(12px, 2.2vw, 14px);
              color: #1f2937;
              line-height: 1.7;
              text-align: justify;
              margin-bottom: 12px;

              @media (max-width: 768px) {
                font-size: 11px;
                line-height: 1.6;
                margin-bottom: 8px;
              }
            }

            // å…³é”®äº®ç‚¹åˆ—è¡¨
            .highlights {
              display: flex;
              flex-direction: column;
              gap: 6px;

              .highlight-item {
                display: flex;
                align-items: flex-start;
                gap: 8px;
                font-size: clamp(10px, 2vw, 12px);
                color: #4b5563;
                line-height: 1.5;

                @media (max-width: 768px) {
                  font-size: 10px;
                  gap: 6px;
                }

                .highlight-dot {
                  color: rgb(22, 93, 255);
                  font-weight: bold;
                  flex-shrink: 0;
                }

                .highlight-text {
                  flex: 1;
                }
              }
            }
          }
        }
      }
    }
  }

  // å¼¹çª—æ ·å¼
  .bar-tooltip {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    animation: fadeIn 0.3s ease;

    .tooltip-content {
      background: white;
      border-radius: 20px;
      padding: 35px;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      position: relative;
      animation: slideUp 0.3s ease;

      @media (max-width: 768px) {
        padding: 25px;
      }

      .close-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        width: 35px;
        height: 35px;
        border: none;
        background: rgba(22, 93, 255, 0.1);
        border-radius: 50%;
        font-size: 24px;
        color: rgb(22, 93, 255);
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;

        &:hover {
          background: rgb(22, 93, 255);
          color: white;
          transform: rotate(90deg);
        }
      }

      .tooltip-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 15px;

        .tooltip-icon {
          font-size: 32px;
        }

        h4 {
          font-size: clamp(18px, 3vw, 22px);
          font-weight: bold;
          color: rgb(22, 93, 255);
          margin: 0;
        }
      }

      .tooltip-year {
        font-size: 16px;
        font-weight: 600;
        color: #6b7280;
        margin-bottom: 10px;
      }

      .tooltip-value {
        font-size: clamp(28px, 5vw, 36px);
        font-weight: bold;
        color: #1f2937;
        margin-bottom: 15px;
      }

      .tooltip-detail {
        font-size: clamp(14px, 2.5vw, 16px);
        color: #4b5563;
        line-height: 1.8;
      }
    }
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
</style>
```

---

## ğŸ¯ å…³é”®è®¾è®¡è¯´æ˜

### 1. å¸ƒå±€æ¯”ä¾‹

**PCç«¯ï¼š**
- å·¦ä¾§æŸ±çŠ¶å›¾ï¼š45%
- å³ä¾§æ–‡å­—ï¼š55%

**æ‰‹æœºç«¯ï¼š**
- å·¦ä¾§æŸ±çŠ¶å›¾ï¼š40%
- å³ä¾§æ–‡å­—ï¼š60%

**åŸå› ï¼š** æŸ±çŠ¶å›¾éœ€è¦è¶³å¤Ÿå®½åº¦å±•ç¤º3ä¸ªæŸ±å­ï¼Œä½†æ–‡å­—ä»‹ç»éœ€è¦æ›´å¤šç©ºé—´æ¥ä¿è¯å¯è¯»æ€§ã€‚

---

### 2. æ‰‹æœºç«¯ä¸€å±å±•ç¤º

```scss
.chart-module {
  @media (max-width: 768px) {
    min-height: calc((100vh - 180px) / 3);
    // 100vh å‡å»é¡¶æ (60px) + æ ‡é¢˜(40px) + åº•éƒ¨å¯¼èˆª(80px) = 180px
    // å‰©ä½™ç©ºé—´é™¤ä»¥3ï¼Œæ¯ä¸ªæ¨¡å—å 1/3
  }
}
```

**è°ƒæ•´æ–¹æ³•ï¼š**
- å¦‚æœå†…å®¹æº¢å‡ºï¼Œå‡å°å­—ä½“å¤§å°æˆ–æŸ±çŠ¶å›¾é«˜åº¦
- å¦‚æœç©ºé—´è¿‡å¤§ï¼Œå¢åŠ  padding æˆ–å­—ä½“å¤§å°

---

### 3. æ–‡å­—ä»‹ç»çš„å±‚æ¬¡ç»“æ„

æ¯ä¸ªæ¨¡å—çš„å³ä¾§æ–‡å­—åŒ…å«ï¼š
1. **ä¸»è¦æè¿°**ï¼ˆ`description`ï¼‰ï¼šæ‰“å­—æœºæ•ˆæœæ˜¾ç¤ºï¼Œ150-200å­—
2. **å…³é”®äº®ç‚¹**ï¼ˆ`highlights`ï¼‰ï¼š3-4ä¸ªè¦ç‚¹ï¼Œåˆ—è¡¨å½¢å¼å±•ç¤º

---

### 4. æ•°æ®å±•ç¤ºæ ¼å¼

æŸ±çŠ¶å›¾ä¸Šçš„æ•°å€¼è‡ªåŠ¨æ ¼å¼åŒ–ï¼š
- å°äº10000ï¼šç›´æ¥æ˜¾ç¤ºï¼ˆå¦‚ "120å®¶"ï¼‰
- å¤§äº10000ï¼šè½¬æ¢ä¸ºä¸‡ï¼ˆå¦‚ "150ä¸‡è¾†"ï¼‰

---

### 5. äº¤äº’ç»†èŠ‚

**æŸ±å­ç‚¹å‡»å¼¹çª—ï¼š**
- æ˜¾ç¤ºå®Œæ•´çš„å¹´ä»½ã€æ•°å€¼ã€è¯¦ç»†è¯´æ˜
- åŒ…å«æ¨¡å—çš„ icon å’Œ title ä½œä¸ºä¸Šä¸‹æ–‡

**æ‰“å­—æœºæ•ˆæœï¼š**
- æ–‡å­—æè¿°é€å­—æ˜¾ç¤º
- é€Ÿåº¦ï¼š30ms/å­—ç¬¦
- æ¯ä¸ªæ¨¡å—çš„æ–‡å­—åœ¨æŸ±å­åŠ¨ç”»å®Œæˆåå¼€å§‹

**åŠ¨ç”»åè°ƒï¼š**
1. æ¨¡å—æ·¡å…¥ï¼ˆ0.8sï¼‰
2. æŸ±å­é€æ¡å‡ºç°ï¼ˆæ¯æ¡é—´éš”400msï¼‰
3. æ–‡å­—æ‰“å­—æœºæ•ˆæœå¼€å§‹ï¼ˆå»¶è¿Ÿ800msï¼‰

---

## ğŸ“± å“åº”å¼é€‚é…ç»†èŠ‚

### æå°å±å¹•ï¼ˆiPhone SE: 375x667ï¼‰

```scss
@media (max-width: 375px) and (max-height: 667px) {
  .chart-module {
    padding: 10px;

    .module-content {
      .chart-side .chart-bars {
        height: 120px; // è¿›ä¸€æ­¥ç¼©å°
      }

      .text-side {
        padding: 8px;

        .description {
          font-size: 10px;
          line-height: 1.5;
        }

        .highlights .highlight-item {
          font-size: 9px;
        }
      }
    }
  }
}
```

### å¹³æ¿æ¨ªå±ï¼ˆiPadï¼‰

```scss
@media (min-width: 768px) and (max-width: 1024px) {
  .chart-module {
    .module-content {
      grid-template-columns: 50% 50%; // å¹³æ¿ç«¯å‡åˆ†
    }
  }
}
```

---

## âœ… éªŒæ”¶æ¸…å•

### å¸ƒå±€éªŒæ”¶
- [ ] ä¸‰ä¸ªæ¨¡å—çºµå‘æ’åˆ—
- [ ] æ¯ä¸ªæ¨¡å—å·¦ä¾§æ˜¯æŸ±çŠ¶å›¾ï¼Œå³ä¾§æ˜¯æ–‡å­—
- [ ] æ‰‹æœºç«¯ä¸‰ä¸ªæ¨¡å—åˆšå¥½å æ»¡ä¸€å±
- [ ] æŸ±çŠ¶å›¾å’Œæ–‡å­—ç´§å¯†è´´åˆï¼Œæ— å¤šä½™é—´éš™

### æ•°æ®éªŒæ”¶
- [ ] æ±½è½¦äº§é‡ï¼š100ä¸‡ã€130ä¸‡ã€150ä¸‡
- [ ] ä¼ä¸šæ•°é‡ï¼š120å®¶ã€180å®¶ã€250å®¶
- [ ] å‡ºå£é‡ï¼š30ä¸‡ã€65ä¸‡ã€90ä¸‡
- [ ] æ•°å€¼æ ¼å¼æ­£ç¡®ï¼ˆä¸‡è¾†ã€å®¶ã€ä¸‡è¾†ï¼‰

### åŠ¨ç”»éªŒæ”¶
- [ ] æŸ±å­é€æ¡ä»åº•éƒ¨ç”Ÿé•¿
- [ ] æ¯æ¡æŸ±å­é—´éš”400ms
- [ ] æ–‡å­—æ‰“å­—æœºæ•ˆæœæµç•…
- [ ] ç‚¹å‡»æŸ±å­å¼¹çª—æ­£å¸¸æ˜¾ç¤º

### äº¤äº’éªŒæ”¶
- [ ] ç‚¹å‡»æŸ±å­æ˜¾ç¤ºè¯¦ç»†å¼¹çª—
- [ ] å¼¹çª—åŒ…å«å¹´ä»½ã€æ•°å€¼ã€è¯¦ç»†è¯´æ˜
- [ ] å…³é—­æŒ‰é’®å¸¦æ—‹è½¬åŠ¨ç”»
- [ ] ç‚¹å‡»é®ç½©å±‚å¯å…³é—­å¼¹çª—

---

## ğŸ”§ å¸¸è§é—®é¢˜

**Q1: æ‰‹æœºç«¯ä¸‰ä¸ªæ¨¡å—è¶…å‡ºä¸€å±æ€ä¹ˆåŠï¼Ÿ**

A: è°ƒæ•´ä»¥ä¸‹å‚æ•°ï¼š
1. å‡å° `chart-bars` çš„ `height`ï¼ˆä»180pxé™è‡³140pxæˆ–120pxï¼‰
2. å‡å°æ–‡å­— `font-size`
3. å‡å°æ¨¡å— `padding`
4. å»é™¤ `highlights` åˆ—è¡¨ï¼Œåªä¿ç•™ `description`

**Q2: æ–‡å­—ä»‹ç»å¤ªé•¿ï¼Œè¶…å‡ºå³ä¾§åŒºåŸŸæ€ä¹ˆåŠï¼Ÿ**

A:
1. æ§åˆ¶ `description` åœ¨150å­—ä»¥å†…
2. ä½¿ç”¨ `overflow: auto` å…è®¸æ»šåŠ¨
3. ä½¿ç”¨ `text-overflow: ellipsis` æˆªæ–­è¶…é•¿æ–‡å­—

**Q3: æŸ±çŠ¶å›¾çš„æŸ±å­å¤ªçª„ï¼Œæ•°å€¼æ˜¾ç¤ºä¸å…¨ï¼Ÿ**

A: è°ƒæ•´æŸ±å­å®½åº¦ï¼š
```scss
.bar {
  max-width: 60px; // å¢åŠ åˆ°60pxæˆ–æ›´å¤§
}
```

---

## ğŸ“Š æ•°æ®å¯é…ç½®æ€§

å»ºè®®å°†æ•°æ®æŠ½ç¦»åˆ°ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼š

```typescript
// src/config/chartData.ts
export const chartConfig = {
  carProduction: {
    2023: { value: 100, detail: '...' },
    2024: { value: 130, detail: '...' },
    2025: { value: 150, detail: '...' }
  },
  // ...
}
```

è¿™æ ·åç»­ä¿®æ”¹æ•°æ®æ—¶ï¼Œåªéœ€ä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯ã€‚

---

è¿™ä¸ªæ–¹æ¡ˆç°åœ¨å®Œå…¨åŒ¹é…ä½ çš„éœ€æ±‚äº†ï¼æœ‰ä»»ä½•ä¸æ¸…æ¥šçš„åœ°æ–¹éšæ—¶å‘Šè¯‰æˆ‘ã€‚
