# ğŸ“¸ å›¾ç‰‡ä¼˜åŒ–æŒ‡å—

## âš ï¸ å½“å‰çŠ¶æ€

æ¿å—4çš„6å¼ å›¾ç‰‡å·²æˆåŠŸå¤åˆ¶åˆ°é¡¹ç›®ä¸­ï¼Œä½†æ–‡ä»¶ä½“ç§¯è¾ƒå¤§ï¼š

```
highway.jpg     - 11MB
hospital.jpg    - 11MB
housing.jpg     - 13MB
main-road.jpg   - 14MB
school.jpg      - 12MB
train.jpg       - 12MB
æ€»è®¡: çº¦82MB
```

**é—®é¢˜**: è¿™äº›å›¾ç‰‡å¯¹äºH5é¡µé¢æ¥è¯´è¿‡å¤§ï¼Œä¼šå¯¼è‡´ï¼š
- é¦–æ¬¡åŠ è½½æ—¶é—´é•¿ï¼ˆ3Gç½‘ç»œä¸‹å¯èƒ½è¶…è¿‡30ç§’ï¼‰
- æµé‡æ¶ˆè€—å¤§
- ä½ç«¯è®¾å¤‡å¯èƒ½å¡é¡¿
- ç”¨æˆ·ä½“éªŒä¸ä½³

**å»ºè®®**: å°†æ¯å¼ å›¾ç‰‡ä¼˜åŒ–åˆ°200-500KBï¼Œæ€»è®¡ä¸è¶…è¿‡3MBã€‚

---

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

- **å•å¼ å¤§å°**: 200-500KBï¼ˆå½“å‰10-14MBï¼‰
- **æ€»ä½“ç§¯**: ä¸è¶…è¿‡3MBï¼ˆå½“å‰82MBï¼‰
- **å°ºå¯¸**: 1920x1080pxæˆ–1600x900pxï¼ˆé€‚åˆH5æ˜¾ç¤ºï¼‰
- **æ ¼å¼**: WebPï¼ˆæ¯”JPGå°30-50%ï¼‰æˆ–ä¼˜åŒ–åçš„JPG
- **è´¨é‡**: 85%ï¼ˆè‚‰çœ¼æ— æ³•åˆ†è¾¨ä¸åŸå›¾å·®å¼‚ï¼‰

---

## ğŸ› ï¸ æ–¹æ³•1ï¼šåœ¨çº¿å·¥å…·å‹ç¼©ï¼ˆæœ€ç®€å•ï¼‰

### æ¨èå·¥å…·
- **TinyPNG** (https://tinypng.com/)
  - æ‹–æ‹½ä¸Šä¼ 6å¼ å›¾ç‰‡
  - è‡ªåŠ¨å‹ç¼©ï¼ˆé€šå¸¸å‡å°‘70-80%ä½“ç§¯ï¼‰
  - ä¸‹è½½å‹ç¼©åçš„æ–‡ä»¶

- **Squoosh** (https://squoosh.app/)
  - é€å¼ å¤„ç†ï¼Œå¯ç²¾ç¡®æ§åˆ¶è´¨é‡
  - æ”¯æŒWebPæ ¼å¼è½¬æ¢
  - å¯¹æ¯”å‹ç¼©å‰åæ•ˆæœ

### æ“ä½œæ­¥éª¤
1. æ‰“å¼€ https://tinypng.com/
2. æ‹–æ‹½6å¼ å›¾ç‰‡ä¸Šä¼ ï¼ˆä¸€æ¬¡æœ€å¤š20å¼ ï¼‰
3. ç­‰å¾…å‹ç¼©å®Œæˆ
4. ç‚¹å‡»"Download All"ä¸‹è½½å‹ç¼©åŒ…
5. è§£å‹åæ›¿æ¢ `public/images/section4/` ä¸­çš„æ–‡ä»¶

---

## ğŸ› ï¸ æ–¹æ³•2ï¼šPhotoshopæ‰¹é‡å¤„ç†

### æ­¥éª¤
1. æ‰“å¼€Photoshop
2. æ–‡ä»¶ â†’ è„šæœ¬ â†’ å›¾åƒå¤„ç†å™¨
3. é€‰æ‹©æºæ–‡ä»¶å¤¹ï¼š`F:\BaiduNetdiskDownload\æ·±æ±•é¡¹ç›®H5\...`
4. é€‰æ‹©ç›®æ ‡æ–‡ä»¶å¤¹ï¼š`e:\Project\sz-fighting-project\public\images\section4\`
5. æ–‡ä»¶ç±»å‹ï¼šJPEGï¼Œå“è´¨10ï¼ˆç›¸å½“äº85%ï¼‰
6. è°ƒæ•´å›¾åƒå¤§å°ï¼š
   - å®½åº¦ï¼š1920px
   - é«˜åº¦ï¼š1080px
   - å‹¾é€‰"çº¦æŸæ¯”ä¾‹"
7. ç‚¹å‡»"è¿è¡Œ"

---

## ğŸ› ï¸ æ–¹æ³•3ï¼šä½¿ç”¨Pythonè„šæœ¬ï¼ˆæ¨èç»™å¼€å‘è€…ï¼‰

### å®‰è£…ä¾èµ–
```bash
pip install pillow
```

### åˆ›å»ºä¼˜åŒ–è„šæœ¬ `optimize_images.py`
```python
from PIL import Image
import os

# æºç›®å½•å’Œç›®æ ‡ç›®å½•
source_dir = r"F:\BaiduNetdiskDownload\æ·±æ±•é¡¹ç›®H5\æ·±æ±•H5èµ„æº"
target_dir = r"e:\Project\sz-fighting-project\public\images\section4"

# å›¾ç‰‡æ˜ å°„ï¼ˆæ ¹æ®æ‚¨æä¾›çš„è·¯å¾„ï¼‰
images = [
    ("æ¿å—4äº¤é€šè®¾æ–½ å››ä¸ªé«˜é“å„2-3å¼ /å¹¿æ±•é“è·¯/2025å¹´9æœˆ/æ·±æ±•ç‰¹åˆ«åˆä½œåŒºå¹¿æ±•é“è·¯å…¨æ™¯2025.9.22-2.jpg", "train.jpg"),
    ("æ¿å—4äº¤é€šè®¾æ–½ å››ä¸ªé«˜é“å„2-3å¼ /æ·±æ±•è¥¿é«˜é€Ÿæ”¹æ‰©å»ºæå‡å·¥ç¨‹/2025å¹´9æœˆ/æ·±æ±•ç‰¹åˆ«åˆä½œåŒºæ·±æ±•è¥¿é«˜é€Ÿæ”¹æ‰©å»ºæå‡å·¥ç¨‹èˆªæ‹2025.9.20-10.jpg", "highway.jpg"),
    ("æ¿å—4 æ•™è‚²è®¾æ–½ ä¸¤ä¸ªæ ¡åŒºå„2-3/æ·±æ±•é«˜ä¸­å›­é¡¹ç›®åŠäºŒé«˜æ·±æ±•å®éªŒå­¦æ ¡/2025å¹´9æœˆ/æ·±æ±•ç‰¹åˆ«åˆä½œåŒºæ·±æ±•ä¸­å­¦é«˜ä¸­å›­é¡¹ç›®2025.9.19-6.jpg", "school.jpg"),
    ("æ¿å—4 ä¿éšœæˆ¿ 3/èµ¤æ²³å¹¿åœºåŠä¸´é‚¦é‡Œç‰‡åŒº/2025å¹´9æœˆ/æ·±æ±•ç‰¹åˆ«åˆä½œåŒºèµ¤æ²³å¹¿åœº2025.9.20-2.jpg", "housing.jpg"),
    ("æ¿å—4åŒ»ç–—è®¾æ–½ 3/æ·±åœ³å¸‚æ·±æ±•äººæ°‘åŒ»é™¢/2025å¹´9æœˆ/æ·±æ±•ç‰¹åˆ«åˆä½œåŒºæ·±åœ³å¸‚æ·±æ±•äººæ°‘åŒ»é™¢å…¨æ™¯å›¾2025.9.20-7.jpg", "hospital.jpg"),
    ("æ¿å—4äº¤é€šè®¾æ–½ å››ä¸ªé«˜é“å„2-3å¼ /é€šæ¸¯å¤§é“é¡¹ç›®/2025å¹´9æœˆ/æ·±æ±•ç‰¹åˆ«åˆä½œåŒºé€šæ¸¯å¤§é“é¡¹ç›®å…¨æ™¯2025.9.21-10.jpg", "main-road.jpg")
]

def optimize_image(source_path, target_path, max_width=1920, quality=85):
    """ä¼˜åŒ–å•å¼ å›¾ç‰‡"""
    try:
        img = Image.open(source_path)

        # è®¡ç®—æ–°å°ºå¯¸ï¼ˆä¿æŒæ¯”ä¾‹ï¼‰
        if img.width > max_width:
            ratio = max_width / img.width
            new_height = int(img.height * ratio)
            img = img.resize((max_width, new_height), Image.Resampling.LANCZOS)

        # è½¬æ¢ä¸ºRGBï¼ˆå¦‚æœæ˜¯RGBAï¼‰
        if img.mode == 'RGBA':
            img = img.convert('RGB')

        # ä¿å­˜ä¼˜åŒ–åçš„å›¾ç‰‡
        img.save(target_path, 'JPEG', quality=quality, optimize=True)

        # è¾“å‡ºæ–‡ä»¶å¤§å°
        original_size = os.path.getsize(source_path) / (1024 * 1024)
        optimized_size = os.path.getsize(target_path) / (1024 * 1024)
        print(f"âœ… {os.path.basename(target_path)}: {original_size:.2f}MB â†’ {optimized_size:.2f}MB (å‡å°‘ {((1 - optimized_size/original_size) * 100):.1f}%)")

    except Exception as e:
        print(f"âŒ å¤„ç†å¤±è´¥ {source_path}: {e}")

# æ‰¹é‡ä¼˜åŒ–
print("å¼€å§‹ä¼˜åŒ–å›¾ç‰‡...\n")
for source_rel, target_name in images:
    source_full = os.path.join(source_dir, source_rel)
    target_full = os.path.join(target_dir, target_name)
    optimize_image(source_full, target_full)

print("\nâœ… æ‰€æœ‰å›¾ç‰‡ä¼˜åŒ–å®Œæˆï¼")
```

### è¿è¡Œè„šæœ¬
```bash
python optimize_images.py
```

---

## ğŸ› ï¸ æ–¹æ³•4ï¼šä½¿ç”¨Node.jsè„šæœ¬

### å®‰è£…ä¾èµ–
```bash
npm install sharp --save-dev
```

### åˆ›å»ºè„šæœ¬ `scripts/optimize-images.js`
```javascript
const sharp = require('sharp');
const fs = require('fs');
const path = require('path');

const sourceDir = 'F:/BaiduNetdiskDownload/æ·±æ±•é¡¹ç›®H5/æ·±æ±•H5èµ„æº';
const targetDir = 'public/images/section4';

const images = [
  { source: 'æ¿å—4äº¤é€šè®¾æ–½ å››ä¸ªé«˜é“å„2-3å¼ /å¹¿æ±•é“è·¯/2025å¹´9æœˆ/æ·±æ±•ç‰¹åˆ«åˆä½œåŒºå¹¿æ±•é“è·¯å…¨æ™¯2025.9.22-2.jpg', target: 'train.jpg' },
  { source: 'æ¿å—4äº¤é€šè®¾æ–½ å››ä¸ªé«˜é“å„2-3å¼ /æ·±æ±•è¥¿é«˜é€Ÿæ”¹æ‰©å»ºæå‡å·¥ç¨‹/2025å¹´9æœˆ/æ·±æ±•ç‰¹åˆ«åˆä½œåŒºæ·±æ±•è¥¿é«˜é€Ÿæ”¹æ‰©å»ºæå‡å·¥ç¨‹èˆªæ‹2025.9.20-10.jpg', target: 'highway.jpg' },
  { source: 'æ¿å—4 æ•™è‚²è®¾æ–½ ä¸¤ä¸ªæ ¡åŒºå„2-3/æ·±æ±•é«˜ä¸­å›­é¡¹ç›®åŠäºŒé«˜æ·±æ±•å®éªŒå­¦æ ¡/2025å¹´9æœˆ/æ·±æ±•ç‰¹åˆ«åˆä½œåŒºæ·±æ±•ä¸­å­¦é«˜ä¸­å›­é¡¹ç›®2025.9.19-6.jpg', target: 'school.jpg' },
  { source: 'æ¿å—4 ä¿éšœæˆ¿ 3/èµ¤æ²³å¹¿åœºåŠä¸´é‚¦é‡Œç‰‡åŒº/2025å¹´9æœˆ/æ·±æ±•ç‰¹åˆ«åˆä½œåŒºèµ¤æ²³å¹¿åœº2025.9.20-2.jpg', target: 'housing.jpg' },
  { source: 'æ¿å—4åŒ»ç–—è®¾æ–½ 3/æ·±åœ³å¸‚æ·±æ±•äººæ°‘åŒ»é™¢/2025å¹´9æœˆ/æ·±æ±•ç‰¹åˆ«åˆä½œåŒºæ·±åœ³å¸‚æ·±åœ³å¸‚æ·±æ±•äººæ°‘åŒ»é™¢å…¨æ™¯å›¾2025.9.20-7.jpg', target: 'hospital.jpg' },
  { source: 'æ¿å—4äº¤é€šè®¾æ–½ å››ä¸ªé«˜é“å„2-3å¼ /é€šæ¸¯å¤§é“é¡¹ç›®/2025å¹´9æœˆ/æ·±æ±•ç‰¹åˆ«åˆä½œåŒºé€šæ¸¯å¤§é“é¡¹ç›®å…¨æ™¯2025.9.21-10.jpg', target: 'main-road.jpg' }
];

async function optimizeImage(sourcePath, targetPath) {
  try {
    const originalSize = fs.statSync(sourcePath).size / (1024 * 1024);

    await sharp(sourcePath)
      .resize(1920, null, { withoutEnlargement: true })
      .jpeg({ quality: 85, progressive: true })
      .toFile(targetPath);

    const optimizedSize = fs.statSync(targetPath).size / (1024 * 1024);
    const reduction = ((1 - optimizedSize / originalSize) * 100).toFixed(1);

    console.log(`âœ… ${path.basename(targetPath)}: ${originalSize.toFixed(2)}MB â†’ ${optimizedSize.toFixed(2)}MB (å‡å°‘ ${reduction}%)`);
  } catch (error) {
    console.error(`âŒ å¤„ç†å¤±è´¥ ${sourcePath}:`, error.message);
  }
}

async function main() {
  console.log('å¼€å§‹ä¼˜åŒ–å›¾ç‰‡...\n');

  for (const { source, target } of images) {
    const sourcePath = path.join(sourceDir, source);
    const targetPath = path.join(targetDir, target);
    await optimizeImage(sourcePath, targetPath);
  }

  console.log('\nâœ… æ‰€æœ‰å›¾ç‰‡ä¼˜åŒ–å®Œæˆï¼');
}

main();
```

### è¿è¡Œè„šæœ¬
```bash
node scripts/optimize-images.js
```

---

## ğŸ“‹ ä¼˜åŒ–åæ£€æŸ¥æ¸…å•

ä¼˜åŒ–å®Œæˆåï¼Œè¯·éªŒè¯ï¼š

- [ ] æ¯å¼ å›¾ç‰‡ä½“ç§¯åœ¨200-500KBä¹‹é—´
- [ ] æ€»ä½“ç§¯ä¸è¶…è¿‡3MB
- [ ] å›¾ç‰‡å°ºå¯¸ä¸º1920x1080pxæˆ–ç›¸è¿‘
- [ ] åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€é¡¹ç›®ï¼Œæ£€æŸ¥å›¾ç‰‡æ¸…æ™°åº¦
- [ ] åœ¨ç§»åŠ¨ç«¯è®¾å¤‡ä¸Šæµ‹è¯•åŠ è½½é€Ÿåº¦
- [ ] ä½¿ç”¨Chrome DevTools Networkæ ‡ç­¾æŸ¥çœ‹åŠ è½½æ—¶é—´

### éªŒè¯å‘½ä»¤
```bash
# æŸ¥çœ‹ä¼˜åŒ–åçš„æ–‡ä»¶å¤§å°
cd public/images/section4
ls -lh *.jpg

# æŸ¥çœ‹æ€»å¤§å°
du -sh .
```

---

## ğŸ¯ é¢„æœŸæ•ˆæœ

ä¼˜åŒ–å‰ï¼š
```
æ€»ä½“ç§¯: 82MB
é¦–æ¬¡åŠ è½½: 30-60ç§’ï¼ˆ3Gç½‘ç»œï¼‰
ç”¨æˆ·ä½“éªŒ: âŒ æå·®
```

ä¼˜åŒ–åï¼š
```
æ€»ä½“ç§¯: 2-3MB
é¦–æ¬¡åŠ è½½: 3-5ç§’ï¼ˆ3Gç½‘ç»œï¼‰
ç”¨æˆ·ä½“éªŒ: âœ… è‰¯å¥½
```

---

## âš¡ å¿«é€Ÿè§£å†³æ–¹æ¡ˆï¼ˆæ¨èï¼‰

å¦‚æœæ‚¨ä¸æƒ³æ‰‹åŠ¨å¤„ç†ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼š

1. è®¿é—® https://tinypng.com/
2. ä¸Šä¼ è¿™6å¼ å›¾ç‰‡ï¼š
   - `public/images/section4/train.jpg`
   - `public/images/section4/highway.jpg`
   - `public/images/section4/school.jpg`
   - `public/images/section4/housing.jpg`
   - `public/images/section4/hospital.jpg`
   - `public/images/section4/main-road.jpg`
3. ä¸‹è½½å‹ç¼©åçš„æ–‡ä»¶
4. æ›¿æ¢åŸæ–‡ä»¶

**é¢„è®¡æ—¶é—´**: 5åˆ†é’Ÿ
**å‡å°‘ä½“ç§¯**: 70-85%
**è´¨é‡æŸå¤±**: è‚‰çœ¼å‡ ä¹æ— æ³•å¯Ÿè§‰

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. åŸå§‹å›¾ç‰‡è·¯å¾„æ˜¯å¦æ­£ç¡®
2. ç›®æ ‡ç›®å½•æƒé™æ˜¯å¦æ­£å¸¸
3. ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³
4. Python/Node.jsç‰ˆæœ¬æ˜¯å¦æ»¡è¶³è¦æ±‚

---

**ä¼˜å…ˆçº§**: ğŸ”´ é«˜ï¼ˆä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒï¼‰
**é¢„è®¡è€—æ—¶**: 10-15åˆ†é’Ÿ
**æ¨èæ–¹æ³•**: åœ¨çº¿å·¥å…· (TinyPNG)
